(function(e){function t(t){for(var o,i,n=t[0],l=t[1],c=t[2],u=0,d=[];u<n.length;u++)i=n[u],r[i]&&d.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);m&&m(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],o=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},r={app:0},s=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var m=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0047":function(e,t,a){},"034f":function(e,t,a){"use strict";var o=a("c21b"),r=a.n(o);r.a},"2a9b":function(e,t,a){"use strict";var o=a("dc1c"),r=a.n(o);r.a},4785:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("a481"),a("cadf"),a("551c"),a("097d");var o=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",[a("el-header",[a("Header")],1),a("el-main",[a("router-view")],1)],1)],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{ref:"menu",staticClass:"el-menu-demo",attrs:{"default-active":e.$route.name,router:!0,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"lol",route:{name:"lol"}}},[e._v("问题中心")]),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.adminVisible,expression:"adminVisible"}],attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("系统管理")]),a("el-menu-item",{attrs:{index:"user",route:{name:"user"}}},[e._v("\n                用户管理\n            ")]),a("el-menu-item",{attrs:{index:"tag"}},[e._v("标签管理")]),a("el-menu-item",{attrs:{index:"#"},on:{click:e.resetIndex}},[e._v("重置索引")])],2),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.userVisible,expression:"userVisible"}],attrs:{index:"3"}},[a("template",{slot:"title"},[e._v("用户中心")]),a("el-menu-item",{attrs:{index:"#"},on:{click:e.editUser}},[e._v("\n                修改资料\n            ")]),a("el-menu-item",{attrs:{index:"#"},on:{click:e.logout}},[e._v("\n                退出登录\n            ")])],2),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.userVisible,expression:"!userVisible"}],attrs:{index:"#"}},[a("el-button",{on:{click:e.openLogin}},[e._v("登录")])],1)],1),a("div",{staticClass:"line"}),a("div",{staticClass:"search"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doSearch(t):null}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.doSearch},slot:"append"})],1)],1),a("el-dialog",{attrs:{title:"用户登录",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){e.resetForm("loginForm")}}},[a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.loginForm.loginname,callback:function(t){e.$set(e.loginForm,"loginname",t)},expression:"loginForm.loginname"}})],1)],1),a("el-form-item",{attrs:{label:"输入密码",prop:"loginpass","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.loginForm.loginpass,callback:function(t){e.$set(e.loginForm,"loginpass",t)},expression:"loginForm.loginpass"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("loginForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.doLogin}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改资料",visible:e.dialogInfoFormVisible},on:{"update:visible":function(t){e.dialogInfoFormVisible=t},close:function(t){e.resetInfoForm()}}},[a("el-form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.infoRules}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.infoForm.nickname,callback:function(t){e.$set(e.infoForm,"nickname",t)},expression:"infoForm.nickname"}})],1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"realname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.infoForm.realname,callback:function(t){e.$set(e.infoForm,"realname",t)},expression:"infoForm.realname"}})],1)],1),a("el-form-item",{attrs:{label:"新密码",prop:"loginpass","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.infoForm.loginpass,callback:function(t){e.$set(e.infoForm,"loginpass",t)},expression:"infoForm.loginpass"}})],1)],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkpass","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.infoForm.checkpass,callback:function(t){e.$set(e.infoForm,"checkpass",t)},expression:"infoForm.checkpass"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetInfoForm()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},n=[],l={name:"Header",data:function(){var e=this,t=function(t,a,o){a!==e.infoForm.loginpass?o(new Error("两次输入密码不一致!")):o()};return{adminVisible:!1,userVisible:!1,dialogFormVisible:!1,dialogInfoFormVisible:!1,keyword:"",loginForm:{loginname:"",loginpass:""},infoForm:{loginname:"",nickname:"",realname:""},rules:{loginname:[{required:!0,message:"请输入用户名",trigger:"blur"}],loginpass:[{required:!0,message:"请输入密码",trigger:"blur"}]},infoRules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],realname:[{required:!0,message:"请输入姓名",trigger:"blur"}],loginpass:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:8,message:"密码长度必须是3-8位",trigger:"change"}],checkpass:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:t,trigger:"change"}]},formLabelWidth:"120px"}},methods:{loadRole:function(e){"ADMIN"==e?(this.adminVisible=!0,this.userVisible=!0):"USER"==e?this.userVisible=!0:(this.adminVisible=!1,this.userVisible=!1)},editUser:function(){this.dialogInfoFormVisible=!0,this.infoForm.loginname=this.$cookie.get("loginname"),this.infoForm.nickname=this.$cookie.get("nickname"),this.infoForm.realname=this.$cookie.get("realname")},logout:function(){this.$cookie.delete("role"),this.loadRole("NONE"),window.location.reload()},openLogin:function(){this.dialogFormVisible=!0},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},resetInfoForm:function(){this.dialogInfoFormVisible=!1,this.$refs["infoForm"].resetFields()},save:function(){var e=this;this.$refs["infoForm"].validate(function(t){if(!t)return!1;e.$http.post(platform_base+"/platform/user/update",e.infoForm).then(function(e){return e.data}).then(function(t){0==t.code?(e.$message({message:t.msg,type:"success"}),e.$cookie.set("loginname",t.data.loginname),e.$cookie.set("nickname",t.data.nickname),e.$cookie.set("realname",t.data.realname),e.resetInfoForm()):e.$message({message:t.msg,type:"error"})})})},doLogin:function(){var e=this;this.$refs["loginForm"].validate(function(t){if(!t)return!1;e.$http.post(platform_base+"/platform/login/doLogin",e.loginForm).then(function(e){return e.data}).then(function(t){0==t.code?(e.$message({message:t.msg,type:"success"}),e.resetForm("loginForm"),e.loadRole(t.data.role),e.$cookie.set("role",t.data.role),e.$cookie.set("loginname",t.data.loginname),e.$cookie.set("nickname",t.data.nickname),e.$cookie.set("realname",t.data.realname),window.location.reload()):e.$message({message:t.msg,type:"error"})})})},handleSelect:function(e,t){},resetIndex:function(){var e=this;this.$confirm("此操作将重建索引库, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(platform_base+"/platform/bug/reset",{}).then(function(e){return e.data}).then(function(t){0==t.code?e.$message({message:t.msg,type:"success"}):e.$message({message:t.msg,type:"error"})})}).catch(function(){})},doSearch:function(){this.keyword&&(window.location.href="/lol/search/"+this.keyword)}},created:function(){var e=this.$cookie.get("role");this.loadRole(e)}},c=l,m=(a("8a1c"),a("2877")),u=Object(m["a"])(c,i,n,!1,null,"5a4c506f",null);u.options.__file="Header.vue";var d=u.exports,p={name:"app",components:{Header:d}},f=p,g=(a("034f"),Object(m["a"])(f,r,s,!1,null,null,null));g.options.__file="App.vue";var h=g.exports,b=a("5c96"),v=a.n(b);a("c69f");o["default"].use(v.a);var w=a("8c4f"),k=a("bc3a"),F=a.n(k),_=a("a7fe"),y=a.n(_),$=a("00e7"),C=a.n($),x=a("9be6"),V=a.n(x),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.openAdd}},[e._v("新建用户")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"loginname",label:"用户名",width:"200"}}),a("el-table-column",{attrs:{prop:"realname",label:"姓名",width:"200"}}),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"200"}}),a("el-table-column",{attrs:{prop:"disabled",label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66"},model:{value:t.row.disabled,callback:function(a){e.$set(t.row,"disabled",a)},expression:"scope.row.disabled"}})]}}])}),a("el-table-column",{attrs:{prop:"role",label:"角色"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                ")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                ")])]}}])})],1),a("div",{attrs:{align:"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新建用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){e.resetForm("form")}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.loginname,callback:function(t){e.$set(e.form,"loginname",t)},expression:"form.loginname"}})],1)],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"realname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1)],1),a("el-form-item",{attrs:{label:"输入密码",prop:"loginpass","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.form.loginpass,callback:function(t){e.$set(e.form,"loginpass",t)},expression:"form.loginpass"}})],1)],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkpass","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.form.checkpass,callback:function(t){e.$set(e.form,"checkpass",t)},expression:"form.checkpass"}})],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"disabled","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}})],1)],1),a("el-form-item",{attrs:{label:"角色",prop:"role","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-option",{attrs:{label:"管理员",value:"ADMIN"}}),a("el-option",{attrs:{label:"普通用户",value:"USER"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogEditFormVisible},on:{"update:visible":function(t){e.dialogEditFormVisible=t},close:function(t){e.resetEditForm("editForm")}}},[a("el-form",{ref:"editForm",attrs:{model:e.form,rules:e.editRules}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.loginname,callback:function(t){e.$set(e.form,"loginname",t)},expression:"form.loginname"}})],1)],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"realname","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"disabled","label-width":e.formLabelWidth}},[a("el-col",{attrs:{span:20}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}})],1)],1),a("el-form-item",{attrs:{label:"角色",prop:"role","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-option",{attrs:{label:"管理员",value:"ADMIN"}}),a("el-option",{attrs:{label:"普通用户",value:"USER"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetEditForm("editForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("确 定")])],1)],1)],1)},A=[],D={name:"User",data:function(){var e=this,t=function(t,a,o){a!==e.form.loginpass?o(new Error("两次输入密码不一致!")):o()};return{dialogFormVisible:!1,dialogEditFormVisible:!1,form:{id:"",loginname:"",loginpass:"",checkpass:"",nickname:"",realname:"",disabled:!0,role:""},rules:{loginname:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],realname:[{required:!0,message:"请输入姓名",trigger:"blur"}],loginpass:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:8,message:"密码长度必须是3-8位",trigger:"change"}],checkpass:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:t,trigger:"change"}],role:[{required:!0,message:"请选择用户角色",trigger:"blur"}]},editRules:{loginname:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],realname:[{required:!0,message:"请输入姓名",trigger:"blur"}],role:[{required:!0,message:"请选择用户角色",trigger:"blur"}]},formLabelWidth:"120px",tableData:[],pagesize:10,currentPage:1,start:1,totalCount:0}},methods:{openAdd:function(){this.dialogFormVisible=!0,this.form={id:"",loginname:"",loginpass:"",checkpass:"",nickname:"",realname:"",disabled:!0,role:""}},save:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.$http.post(platform_base+"/platform/user/add",e.form,{withCredentials:!0}).then(function(e){return e.data}).then(function(t){0==t.code?(e.$message({message:t.msg,type:"success"}),e.resetForm("form"),e.pageData(1,e.pagesize)):e.$message({message:t.msg,type:"error"})})})},edit:function(){var e=this;this.$refs["editForm"].validate(function(t){if(!t)return!1;e.$http.post(platform_base+"/platform/user/edit",e.form,{withCredentials:!0}).then(function(e){return e.data}).then(function(t){0==t.code?(e.$message({message:t.msg,type:"success"}),e.resetEditForm("editForm"),e.pageData(1,e.pagesize)):e.$message({message:t.msg,type:"error"})})})},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},resetEditForm:function(e){this.dialogEditFormVisible=!1,this.$refs[e].resetFields()},handleEdit:function(e,t){var a=this;this.$http.post(platform_base+"/platform/user/get",{id:t.id},{withCredentials:!0}).then(function(e){return e.data}).then(function(e){0==e.code?(a.form=e.data,a.dialogEditFormVisible=!0):a.$message({message:e.msg,type:"error"})})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post(platform_base+"/platform/user/del",{id:t.id},{withCredentials:!0}).then(function(e){return e.data}).then(function(e){0==e.code?(a.$message({message:e.msg,type:"success"}),a.pageData(1,a.pagesize)):a.$message({message:e.msg,type:"error"})})}).catch(function(){})},handleCurrentChange:function(e){this.currentPage=e,this.pageData(this.currentPage,this.pagesize)},pageData:function(e,t){var a=this;this.$http.post(platform_base+"/platform/user/data",{page:e,size:t},{withCredentials:!0}).then(function(e){return e.data}).then(function(e){0==e.code?(a.tableData=e.data.list,a.totalCount=e.data.pager.recordCount):a.$message({message:e.msg,type:"error"})})}},mounted:function(){this.pageData(this.currentPage,this.pagesize)}},S=D,L=(a("c295"),Object(m["a"])(S,N,A,!1,null,"65064fa0",null));L.options.__file="User.vue";var I=L.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}]},[a("el-button",{attrs:{type:"primary"},on:{click:e.addBug}},[e._v("添加新Bug")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"nickname",label:"Buger",width:"110"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:"level lv-"+t.row.level},[e._v(" ")]),a("a",{staticClass:"bug_title",attrs:{href:"/lol/bug/"+t.row.id,target:"_blank"}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"updateAtStr",label:"录入时间",width:"180"}})],1),a("div",{attrs:{align:"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1)},E=[],z={name:"Lol",data:function(){return{isAdmin:!1,tableData:[],pagesize:10,currentPage:1,start:1,totalCount:0}},methods:{addBug:function(){this.$router.push("/lol/add")},handleCurrentChange:function(e){this.currentPage=e,this.pageData(this.currentPage,this.pagesize)},pageData:function(e,t){var a=this;this.$http.post(platform_base+"/platform/bug/data",{page:e,size:t},{withCredentials:!0}).then(function(e){return e.data}).then(function(e){0==e.code?(a.tableData=e.data.list,a.totalCount=e.data.pager.recordCount):a.$message({message:e.msg,type:"error"})})}},mounted:function(){"ADMIN"==this.$cookie.get("role")&&(this.isAdmin=!0),this.pageData(this.currentPage,this.pagesize)}},B=z,W=(a("778d"),Object(m["a"])(B,P,E,!1,null,"4e9e16a8",null));W.options.__file="Lol.vue";var O=W.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("标题")]),a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.bugForm.title,callback:function(t){e.$set(e.bugForm,"title",t)},expression:"bugForm.title"}})],1)]),a("el-row",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("标签")]),a("el-select",{staticClass:"span_n",attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod,loading:e.loading,placeholder:"请选择标签"},model:{value:e.bugForm.tag,callback:function(t){e.$set(e.bugForm,"tag",t)},expression:"bugForm.tag"}},e._l(e.tags,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),a("el-row",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("作者")]),a("el-select",{staticClass:"span_n",attrs:{filterable:"","default-first-option":"",placeholder:"请选择用户"},model:{value:e.bugForm.userId,callback:function(t){e.$set(e.bugForm,"userId",t)},expression:"bugForm.userId"}},e._l(e.users,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),a("el-row",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("Bug严重度")]),a("el-slider",{attrs:{step:10,"show-stops":""},model:{value:e.bugForm.lv,callback:function(t){e.$set(e.bugForm,"lv",t)},expression:"bugForm.lv"}})],1)]),a("el-row",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.bugForm.note,expression:"bugForm.note"}],staticClass:"editor",attrs:{id:"topicContent",name:"content",rows:"50",placeholder:"使用Markdown语法,下方有粘贴代码和日志的按钮,会有代码高亮"},domProps:{value:e.bugForm.note},on:{input:function(t){t.target.composing||e.$set(e.bugForm,"note",t.target.value)}}})]),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.topicSubmit}},[e._v(e._s(e.topicButtonTip))]),a("el-button",{attrs:{type:"info"},on:{click:e.topicAddCode}},[e._v("插入代码或日志片段")])],1),a("el-dialog",{attrs:{title:"贴代码或日志",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t},close:e.resetForm}},[a("el-form",{ref:"bugForm",attrs:{model:e.bugForm}},[a("el-row",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tempNote,expression:"tempNote"}],staticClass:"editor",attrs:{id:"tempNote",name:"content",rows:"20"},domProps:{value:e.tempNote},on:{input:function(t){t.target.composing||(e.tempNote=t.target.value)}}})])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addIt}},[e._v("确 定")])],1)],1)],1)},j=[],q=(a("7f7f"),{name:"Add",data:function(){return{isAdmin:!1,addFormVisible:!1,loading:!1,tableData:[],bugForm:{title:"",note:"",tag:"",lv:0,loginname:"",userId:""},tags:[],users:[],tempNote:"",topicButtonTip:"提交"}},methods:{goBack:function(){this.$router.push("/lol")},resetForm:function(){this.addFormVisible=!1,this.$refs["bugForm"].resetFields()},topicSubmit:function(){var e=this;this.bugForm.loginname=this.$cookie.get("loginname"),this.bugForm.title=this.bugForm.title.trim(),this.bugForm.title.length<5?this.$message({message:"标题起码5个字",type:"warning"}):this.bugForm.title.length>100?this.$message({message:"标题最多100个字符",type:"warning"}):(this.bugForm.title=this.bugForm.title.replace(" 【","[").replace("】","]"),this.bugForm.note=this.bugForm.note.trim(),this.bugForm.note.length<10?this.$message({message:"内容起码10个字",type:"warning"}):(this.topicButtonTip="正在提交...",this.$http.post(platform_base+"/platform/bug/add",this.bugForm).then(function(e){return e.data}).then(function(t){0==t.code?(e.$message({message:t.msg,type:"success"}),e.$router.push("/lol")):e.$message({message:t.msg,type:"error"})})))},topicAddCode:function(){this.addFormVisible=!0},addIt:function(){this.bugForm.note+="\r\n```\r\n"+this.tempNote+"\r\n```\r\n",this.tempNote="",this.resetForm()},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,this.$http.post(platform_base+"/platform/bug/tag",{name:e}).then(function(e){return e.data}).then(function(e){0==e.code&&(t.tags=e.data.map(function(e){return{value:e.name,label:e.name}})),t.loading=!1})):this.tags=[]}},mounted:function(){var e=this;"ADMIN"==this.$cookie.get("role")&&(this.isAdmin=!0,this.$http.post(platform_base+"/platform/bug/user",{name:""}).then(function(e){return e.data}).then(function(t){0==t.code&&(e.users=t.data.map(function(e){return{value:e.id,label:e.realname}}))})),this.$http.post(platform_base+"/platform/bug/tag",{name:""}).then(function(e){return e.data}).then(function(t){0==t.code&&(e.tags=t.data.map(function(e){return{value:e.name,label:e.name}}))})}}),U=q,T=(a("2a9b"),Object(m["a"])(U,M,j,!1,null,"1726d546",null));T.options.__file="Add.vue";var R=T.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("span",{class:"level lv-"+e.bug.level},[e._v(" ")]),a("span",{staticClass:"title"},[e._v(e._s(e.bug.title))])]),a("el-row",{staticClass:"before_d"},[a("div",{staticClass:"changes"},[a("span",[e._v("\n              发布于 "+e._s(e.bug.updateAtStr)+"\n            ")]),a("span",[e._v("\n              Buger: "+e._s(e.bug.nickname)),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isUser,expression:"isUser"}]},[e._v("["+e._s(e.bug.user.realname)+"]")])])])]),a("el-row",{staticClass:"before_d"},[a("div",{staticClass:"changes"},[e._v("\n            标签: "),e._l(e.bug.tag,function(t){return a("span",{staticClass:"tag"},[e._v(e._s(t))])})],2)]),a("el-row",{staticClass:"before_d"},[a("div",{staticClass:"changes"},[e._v("\n            严重度: "+e._s(e.bug.level)+"\n        ")])]),a("el-row",[a("div",{staticClass:"inner topic"},[a("div",{staticClass:"topic_content",attrs:{itemprop:"articleBody"}},[a("div",{staticClass:"markdown-text",domProps:{innerHTML:e._s(e.bug.note)}})])])]),a("el-row",[a("div",{staticClass:"panel"},[a("div",{staticClass:"header"},[a("span",{staticClass:"col_fade"},[e._v(e._s(e.bug.replies.length)+" 回复")])]),e._l(e.bug.replies,function(t,o){return a("div",{staticClass:"cell reply_area reply_item"},[a("div",{staticClass:"author_content"},[a("div",{staticClass:"user_info"},[a("a",{staticClass:"dark reply_author"},[e._v(e._s(t.nickname))]),a("a",{staticClass:"reply_time"},[e._v(e._s(o+1)+"楼•"+e._s(t.createAtStr))])])]),a("div",{staticClass:"reply_content from-wendal"},[a("div",{staticClass:"markdown-text",domProps:{innerHTML:e._s(t.noteHtml)}})])])})],2)]),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isUser,expression:"isUser"}]},[a("div",{staticClass:"panel",attrs:{"data-intro":"回帖回帖回帖!!","data-position":"top",id:"replyAdd"}},[a("div",{staticClass:"header"},[a("span",{staticClass:"col_fade"},[e._v("添加回复")])]),a("div",{staticClass:"inner reply"},[a("form",{attrs:{action:"#"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyForm.note,expression:"replyForm.note"}],staticClass:"editor",attrs:{id:"topicContent",name:"content",rows:"50",placeholder:"使用Markdown语法,下方有粘贴代码和日志的按钮,会有代码高亮"},domProps:{value:e.replyForm.note},on:{input:function(t){t.target.composing||e.$set(e.replyForm,"note",t.target.value)}}})]),a("el-button",{attrs:{type:"primary"},on:{click:e.topicSubmit}},[e._v("回复")]),a("el-button",{attrs:{type:"info"},on:{click:e.topicAddCode}},[e._v("插入代码或日志片段")])],1)]),a("el-dialog",{attrs:{title:"贴代码或日志",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t},close:e.resetForm}},[a("el-form",{ref:"replyForm",attrs:{model:e.replyForm}},[a("el-row",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tempNote,expression:"tempNote"}],staticClass:"editor",attrs:{id:"tempNote",name:"content",rows:"20"},domProps:{value:e.tempNote},on:{input:function(t){t.target.composing||(e.tempNote=t.target.value)}}})])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addIt}},[e._v("确 定")])],1)],1)],1)],1)},J=[],G={name:"Bug",data:function(){return{isUser:!1,addFormVisible:!1,tempNote:"",replyForm:{note:"",bugId:""},bug:{id:"",title:"",user:{id:"",realname:""},replies:[]}}},methods:{resetForm:function(){this.addFormVisible=!1,this.$refs["replyForm"].resetFields()},topicSubmit:function(){var e=this;this.replyForm.bugId=this.$route.params.id,this.replyForm.note=this.replyForm.note.trim(),this.replyForm.note.length<10?this.$message({message:"内容起码10个字",type:"warning"}):this.$http.post(platform_base+"/platform/bug/reply",this.replyForm).then(function(e){return e.data}).then(function(t){0==t.code?(e.$message({message:t.msg,type:"success"}),setTimeout(function(){window.location.reload()},333)):e.$message({message:t.msg,type:"error"})})},topicAddCode:function(){this.addFormVisible=!0},addIt:function(){this.replyForm.note+="\r\n```\r\n"+this.tempNote+"\r\n```\r\n",this.tempNote="",this.resetForm()}},mounted:function(){var e=this;"ADMIN"!=this.$cookie.get("role")&&"USER"!=this.$cookie.get("role")||(this.isUser=!0),this.$http.post(platform_base+"/platform/bug/s",{id:this.$route.params.id},{withCredentials:!0}).then(function(e){return e.data}).then(function(t){0==t.code?(e.bug=t.data,e.bug.user&&""==e.bug.user.realname&&(e.addFormVisible=!1)):e.$message({message:t.msg,type:"error"})})}},K=G,Q=(a("873a"),Object(m["a"])(K,H,J,!1,null,"5434e3ac",null));Q.options.__file="Bug.vue";var X=Q.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}]},[a("el-button",{attrs:{type:"primary"},on:{click:e.addBug}},[e._v("添加新Bug")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"nickname",label:"Buger",width:"110"}}),a("el-table-column",{attrs:{prop:"title",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:"level lv-"+t.row.level},[e._v(" ")]),a("a",{staticClass:"bug_title",attrs:{href:"/lol/bug/"+t.row.id,target:"_blank"}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"updateAtStr",label:"录入时间",width:"180"}})],1),a("div",{attrs:{align:"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.totalCount},on:{"current-change":e.handleCurrentChange}})],1)],1)},Z=[],ee={name:"Search",data:function(){return{isAdmin:!1,tableData:[],pagesize:10,currentPage:1,start:1,totalCount:0,keyword:""}},methods:{addBug:function(){this.$router.push("/lol/add")},handleCurrentChange:function(e){this.currentPage=e,this.pageData(this.currentPage,this.pagesize)},pageData:function(e,t){var a=this;this.$http.post(platform_base+"/platform/bug/data",{page:e,size:t,keyword:this.keyword},{withCredentials:!0}).then(function(e){return e.data}).then(function(e){a.keyword="",0==e.code?(a.tableData=e.data.list,a.totalCount=e.data.pager.recordCount):a.$message({message:e.msg,type:"error"})})}},mounted:function(){"ADMIN"==this.$cookie.get("role")&&(this.isAdmin=!0),this.keyword=this.$route.params.keyword||"",this.pageData(this.currentPage,this.pagesize)}},te=ee,ae=(a("6725"),Object(m["a"])(te,Y,Z,!1,null,"158745ad",null));ae.options.__file="Search.vue";var oe=ae.exports,re=[{path:"/",redirect:"lol"},{path:"/user",name:"user",component:I},{path:"/lol",name:"lol",component:O},{path:"/lol/search/:keyword",name:"search",component:oe},{path:"/lol/add",name:"add",component:R},{path:"/lol/bug/:id",name:"bug",component:X}];o["default"].use(C.a),o["default"].use(w["a"]),o["default"].use(y.a,F.a),o["default"].use(C.a),o["default"].use(V.a),o["default"].config.productionTip=!1;var se=new w["a"]({routes:re,mode:"history"});se.beforeEach(function(e,t,a){a()}),F.a.defaults.withCredentials=!0,F.a.interceptors.response.use(function(e){return 555==e.data.code&&(C.a.delete("role"),C.a.delete("loginname"),se.replace({path:"/lol"}),window.location.reload()),e},function(e){return Promise.reject(e)}),new o["default"]({router:se,render:function(e){return e(h)}}).$mount("#app")},6725:function(e,t,a){"use strict";var o=a("4785"),r=a.n(o);r.a},"778d":function(e,t,a){"use strict";var o=a("ceaa"),r=a.n(o);r.a},"873a":function(e,t,a){"use strict";var o=a("e71c"),r=a.n(o);r.a},"8a1c":function(e,t,a){"use strict";var o=a("b104"),r=a.n(o);r.a},b104:function(e,t,a){},c21b:function(e,t,a){},c295:function(e,t,a){"use strict";var o=a("0047"),r=a.n(o);r.a},c69f:function(e,t,a){},ceaa:function(e,t,a){},dc1c:function(e,t,a){},e71c:function(e,t,a){}});
//# sourceMappingURL=app.762c2597.js.map